<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Just a Question...</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            /* Cute Pink Palette - Casual, not heavy romance */
            --primary: #FF6B8B;
            --secondary: #FFB3C6;
            --wrong: #ff6b6b;
            --correct: #6bff94;
            --bg: #FFF0F6;
            --text: #5A3E45;
            --cell-size: 44px; /* Slightly larger boxes */
        }

        body {
            font-family: 'Courier New', Courier, monospace; /* Typewriter style for a "note" feel */
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
        }

        h1 {
            color: var(--primary);
            margin-bottom: 5px;
            font-size: 2rem;
            text-align: center;
        }

        p.subtitle {
            margin-top: 0;
            margin-bottom: 20px;
            color: #888;
            font-size: 0.9rem;
        }

        .game-area {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(255, 107, 139, 0.15);
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 95vw;
        }

        .grid {
            display: grid;
            /* 10 columns x 9 rows */
            grid-template-columns: repeat(10, var(--cell-size));
            grid-template-rows: repeat(9, var(--cell-size));
            gap: 4px;
            margin-bottom: 20px;
        }

        .cell {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cell input {
            width: 100%;
            height: 100%;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            text-align: center;
            font-size: 1.4rem;
            font-weight: bold;
            text-transform: uppercase;
            color: var(--text);
            background: #fafafa;
            transition: all 0.2s;
            outline: none;
            padding: 0;
            font-family: inherit;
        }

        .cell input:focus {
            border-color: var(--primary);
            background: #fff;
            transform: scale(1.08);
            z-index: 10;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* Number labels */
        .number-label {
            position: absolute;
            top: 2px;
            left: 5px;
            font-size: 0.7rem;
            color: var(--primary);
            pointer-events: none;
            font-weight: bold;
            z-index: 5;
        }

        /* Validation Colors */
        .cell input.correct {
            background-color: #e3ffe9;
            border-color: var(--correct);
            color: #2d7a3d;
        }

        .cell input.wrong {
            background-color: #ffe3e3;
            border-color: var(--wrong);
            animation: shake 0.4s ease-in-out;
        }

        .clues-container {
            width: 100%;
            max-width: 400px;
            text-align: left;
        }

        .clue-item {
            margin-bottom: 12px;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .clue-num {
            display: inline-block;
            background: var(--secondary);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            margin-right: 8px;
            font-weight: bold;
            font-size: 0.8rem;
        }

        button.check-btn {
            margin-top: 20px;
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
        }

        button.check-btn:hover {
            background-color: #ff476f;
            transform: translateY(-2px);
        }

        #success-msg {
            display: none;
            margin-top: 20px;
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--primary);
            text-align: center;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Mobile Adjustments */
        @media (max-width: 500px) {
            :root { --cell-size: 32px; }
            .game-area { padding: 10px; }
            h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <div class="game-area">
        <h1>Mini Crossword</h1>
        <p class="subtitle">Solve the clues to read the message</p>

        <div class="grid" id="grid-container">
            </div>

        <div class="clues-container">
            <div class="clue-item"><span class="clue-num">1</span> Helper verb for the future (4)</div>
            <div class="clue-item"><span class="clue-num">2</span> The person reading this (3)</div>
            <div class="clue-item"><span class="clue-num">3</span> Rhymes with "tea" (2)</div>
            <div class="clue-item"><span class="clue-num">4</span> Belonging to me (2)</div>
            <div class="clue-item"><span class="clue-num">5</span> A date for Feb 14th (9)</div>
        </div>

        <button class="check-btn" onclick="checkPuzzle()">Check Answers</button>
        <div id="success-msg">Will you be my Valentine? ðŸŒ¹</div>
    </div>

    <script>
        // Grid Configuration
        // Size: 10 columns (0-9), 9 rows (0-8)
        const rows = 9;
        const cols = 10;
        const gridContainer = document.getElementById('grid-container');
        
        // Define words. They don't overlap, just sit near each other nicely.
        // x = column, y = row
        const words = [
            { number: 1, word: "WILL", startX: 2, startY: 0, direction: "down" },
            { number: 2, word: "YOU",  startX: 4, startY: 1, direction: "across" },
            { number: 3, word: "BE",   startX: 4, startY: 3, direction: "across" },
            { number: 4, word: "MY",   startX: 4, startY: 5, direction: "across" },
            { number: 5, word: "VALENTINE", startX: 0, startY: 7, direction: "across" }
        ];

        // We will map cell coordinates "x,y" to the Input Element
        let cellMap = {}; 
        let allInputs = [];

        function createGrid() {
            // 1. Fill grid with empty cells first
            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < cols; c++) {
                    let cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.id = `cell-${c}-${r}`; // coordinate ID
                    gridContainer.appendChild(cell);
                }
            }

            // 2. Place words
            words.forEach(w => {
                let currentX = w.startX;
                let currentY = w.startY;
                let chars = w.word.split('');

                chars.forEach((char, index) => {
                    let cellId = `cell-${currentX}-${currentY}`;
                    let cell = document.getElementById(cellId);

                    // Check if input already exists (if overlapping in future)
                    let input = cell.querySelector('input');
                    if (!input) {
                        input = document.createElement('input');
                        input.maxLength = 1;
                        input.dataset.x = currentX;
                        input.dataset.y = currentY;
                        input.dataset.correctChar = char;
                        
                        // Add typing logic
                        input.addEventListener('input', handleInput);
                        input.addEventListener('keydown', handleKeydown);
                        
                        cell.appendChild(input);
                        cellMap[`${currentX},${currentY}`] = input;
                        allInputs.push(input);
                    }

                    // Add number label if it's the first letter
                    if (index === 0) {
                        let label = document.createElement('span');
                        label.className = 'number-label';
                        label.innerText = w.number;
                        cell.appendChild(label);
                    }

                    // Move to next coordinate
                    if (w.direction === "across") currentX++;
                    else currentY++;
                });
            });
        }

        function handleInput(e) {
            let input = e.target;
            input.classList.remove('wrong'); // clear error state

            if (input.value.length === 1) {
                // Move to next logical input
                // Since words are disjointed, we try to find next input in "reading order"
                let index = allInputs.indexOf(input);
                if (index < allInputs.length - 1) {
                    allInputs[index + 1].focus();
                }
            }
        }

        function handleKeydown(e) {
            if (e.key === "Backspace" && e.target.value === "") {
                // Move back
                let index = allInputs.indexOf(e.target);
                if (index > 0) {
                    allInputs[index - 1].focus();
                }
            }
        }

        function checkPuzzle() {
            let isAllCorrect = true;
            let filledCount = 0;

            allInputs.forEach(input => {
                let userVal = input.value.toUpperCase();
                let correctVal = input.dataset.correctChar;

                if (userVal) filledCount++;

                if (userVal === correctVal) {
                    input.classList.add('correct');
                    input.classList.remove('wrong');
                } else {
                    isAllCorrect = false;
                    if (userVal.length > 0) {
                        input.classList.add('wrong');
                    }
                }
            });

            if (isAllCorrect && filledCount === allInputs.length) {
                // Success!
                document.querySelector('.check-btn').style.display = 'none';
                document.getElementById('success-msg').style.display = 'block';
                fireConfetti();
            }
        }

        function fireConfetti() {
            var duration = 3000;
            var end = Date.now() + duration;

            (function frame() {
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#FF6B8B', '#FFB3C6']
                });
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#FF6B8B', '#FFB3C6']
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }

        // Run
        createGrid();

    </script>
</body>
</html>